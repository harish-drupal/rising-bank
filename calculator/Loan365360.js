KJE.Default.getDate=function(b){var a=KJE;var c=false;var g=null;if(b=="TODAY"){b=a.dateFormat(new Date(),sLabel)}else{if(b=="NEXT_MONTH"){g=new Date();g.setMonth(g.getMonth()+1);b=a.dateFormat(g)}else{if(b.substr(10,1)=="T"){b=b.substr(5,2)+"/"+b.substr(8,2)+"/"+b.substr(0,4)}}}b=KJE.stripDate(b);try{var h=new Array();if(b.indexOf("/")>0){h=b.split("/");h[0]=Math.round(h[0]);h[1]=Math.round(h[1]);h[2]=Math.round(h[2])}else{h[0]=Math.round(b.substring(0,2));h[1]=Math.round(b.substring(2,4));h[2]=Math.round(b.substring(4))}if(h[2]<100){h[2]+=2000}if(h[2]+h[1]+h[0]>0){g=new Date(h[2],h[0]-1,h[1])}else{c=true}}catch(f){c=true}if(c){throw a.getKJEReplaced(a.MSG_INVALID_DATE,sLabel)}return g};KJE.Default.getDays=function(b,c){var a=(c.getTime()-b.getTime())/(1000*60*60);return Math.round(a/24)};KJE.Default.addMonths=function(f,e,d){var a=f.getDate();var c=e;var b=new Date(f.getFullYear(),f.getMonth()+c,a);if(d){if((a>=28)&&(b.getDate()<=3)){b=new Date(f.getFullYear(),f.getMonth()+c,a-b.getDate())}}return b};KJE.Default.subtractMonths=function(f,e,d){var a=f.getDate();var c=e;var b=new Date(f.getFullYear(),f.getMonth()-c,a);if(d){if((a>28)&&(b.getDate()<3)){b=new Date(f.getFullYear(),f.getMonth()-c,a-b.getDate())}}return b};KJE.Default.lastPaymentDate=function(c,g){var b=g.getFullYear();var f=g.getMonth();var a=g.getDate();if(a<c){if(f==0){f=11;b-=1}else{f-=1}}var e=new Date(b,f,c);var d=e.getMonth();if(d!=f){return new Date(b,d,0)}return e};KJE.Default.lastDayOfMonth=function(d){var b=d.getFullYear();var c=d.getMonth();var a=d.getDate();return new Date(b,c+1,0)};KJE.Default.firstDayOfNextMonth=function(a){return KJE.Default.firstDayOfNextPeriod(a,1)};KJE.Default.firstDayOfNextPeriod=function(e,a){e=KJE.Default.lastDayOfMonth(e);var c=e.getFullYear();var d=e.getMonth();var b=e.getDate();if(a==1){return new Date(d>9?c+1:c,d>9?d-10:d+2,1)}else{if(a==12){return new Date(d>10?c+2:c+1,d>10?d-11:d+1,1)}else{return new Date(d>(10-a)?c+1:c,d>(10-a)?d-(11-a):d+(a+1),1)}}};KJE.Loan365360Calc=function(){this.ALLOW_BALLOON=KJE.parameters.get("ALLOW_BALLOON",true);this.OLD_ESTIMATED_CLOSING_DATE=new Date(1970,1,1);this.FIRST_PAYMENT_CALC=KJE.parameters.get("FIRST_PAYMENT_CALC",KJE.Loan365360Calc.FIRST_DAY_NEXT_MONTH);this.LOAN_AMOUNT_DECIMALS=KJE.parameters.get("LOAN_AMOUNT_DECIMALS",2);this.ANNUAL_PERIODS=12;this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Disbursement date must be before your first payment.");this.DS_BALANCE=null;this.DS_INTEREST=null;this.DS_PRINCIPAL=null;this.bKeepPaymentLevel=true;this.cats=null;this.sSchedule=new KJE.Repeating()};KJE.Loan365360Calc.prototype.clear=function(){this.LOAN_TYPE=0;this.LOAN_AMOUNT=0;this.INTEREST_RATE=0;this.TERM=0;this.START_DATE=null;this.AMORT_TERM=0;this.FIRST_PAYMENT_DATE=null;this.PAYMENT_FREQUENCY_ID=KJE.Loan365360Calc.FREQ_MONTHLY};KJE.Loan365360Calc.prototype.calculate=function(H){var b=KJE;var a=this.INTEREST_RATE;var R=this.LOAN_TERM;var T=this.AMORT_TERM;var S=this.START_DATE;var h=this.LOAN_AMOUNT;var j=this.LOAN_TYPE;var q=this.INTEREST_TYPE;var s=this.INTEREST_ONLY_TERM;var g=this.PAYMENT_FREQUENCY_ID;var G=this.PAYMENT_MONTHS_PER_PERIOD=KJE.Loan365360Calc.FREQUENCY_MONTHS_PER_PERIOD[this.PAYMENT_FREQUENCY_ID];if(T<R){T=R}if(s>R){s=R}if(j==KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST){R=s+R}else{if(j!=KJE.Loan365360Calc.LOAN_BALLOON&&!this.ALLOW_BALLOON){T=R;s=0}else{s=0}}var w=this.FIRST_PAYMENT_DATE;if(b.dateFormat(this.OLD_ESTIMATED_CLOSING_DATE)!=b.dateFormat(S)){if(this.FIRST_PAYMENT_CALC==KJE.Loan365360Calc.ONE_MONTH){w=KJE.Default.addMonths(S,G,true)}else{w=KJE.Default.firstDayOfNextPeriod(S,G)}}this.OLD_ESTIMATED_CLOSING_DATE=S;if(w<S){throw this.MSG_ERROR1}var L=R;var A=T;var t=s;if(G!=1){L=R*G+1;A=T*G+1;t=s*G+1;L-=G;A-=G;t-=G;if(s==0){t=0}}var o=a/100;var F=KJE.Loan365360Calc.getPayment(h,o,A,S,w,j,q,g,T);var x=F.DAILY_RATE;var C=F.DAILY_RATE_LEAP;var N=F.MONTHLY_PAYMENT;var Q=F.FINAL_PAYMENT_DATE;var e=KJE.Default.addMonths(w,L-1,true);var u=F.PREPAID_INTEREST;var D=F.PREPAID_INTEREST_DAYS;var P=this.DS_BALANCE=KJE.FloatArray(R);var l=this.cats=new Array(R);var O=0;if(H){var v=this.sSchedule;v.clearRepeat();if(this.PAYMENT_FREQUENCY_ID!=KJE.Loan365360Calc.FREQ_MONTHLY){v.addHeader(v.sReportCol("Payment<br>Number",1),v.sReportCol("Payment<br>Date",6),v.sReportCol("Payment<br>Amount",2),v.sReportCol("Interest<br>Paid",4),v.sReportCol("Principal<br>Paid",3),v.sReportCol("Remaining<br>Balance",5))}else{v.addHeader(v.sReportCol("<br>Month",7),v.sReportCol("<br>Date",12),v.sReportCol("Payment<br>Amount",8),v.sReportCol("Interest<br>Accrued",10),v.sReportCol("Principal<br>Paid",9),v.sReportCol("Ending<br>Balance",11))}}var f=0;var M=0;var y=0;var U=h;var p=0;var d=0;var z=N;var B=0;var K=0;var m=null;var I=KJE.Default.addMonths(S,0,true);var c=Math.round(L);var E=0;for(var J=1;J<=c;J++){O=J-1;m=KJE.Default.addMonths(w,O,true);if(U!=0){D=KJE.Default.getDays(I,m);E+=KJE.Loan365360Calc.getInterest(x,C,q,U,I,m);if(O%G==0){switch(j){case KJE.Loan365360Calc.LOAN_INTEREST_ONLY:d=0;break;case KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST:if(J<=t){d=0}else{d=N}break;default:d=N-E}U-=d;if(U<0){if(j==KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST){d+=U}else{E-=U;d=z-E}U=0}else{switch(j){case KJE.Loan365360Calc.LOAN_INTEREST_ONLY:if(this.PAYMENT_FREQUENCY_ID==KJE.Loan365360Calc.FREQ_MONTHLY){z=E}else{z=E;d=0}break;case KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST:if(this.PAYMENT_FREQUENCY_ID==KJE.Loan365360Calc.FREQ_MONTHLY){z=d+E}else{z=d+E;d=d}break;default:z=N}}if(c<=J){if(U>0.005){if(this.bKeepPaymentLevel&&j==KJE.Loan365360Calc.LOAN_INSTALLMENT&&A==L){E-=U}else{z+=U}U=0;d=z-E}else{U=0}if(E+d!=z){if(this.bKeepPaymentLevel&&j==KJE.Loan365360Calc.LOAN_INSTALLMENT&&A==L){E=z-d}else{z=E+d}}}M+=E;y+=d;f=M+y;B+=d;K+=E;var k=true;var r=this.getPaymentNumber(J);if(J<=L){P[r-1]=U;l[r-1]=""+r}if(H){v.addRepeat(b.number(r),b.dateFormat(m),b.dollars(z,2),b.dollars(E,2),b.dollars(d,2),b.dollars(U,2));if(m.getMonth()+G>=12&&G!=12){v.addFooter(m.getFullYear()+" Totals:","&nbsp;",b.dollars((B+K),2),b.dollars(K,2),b.dollars(B,2),"&nbsp;");B=0;K=0;k=false}}E=0}}else{z=0;U=0;d=0;p=0}I=KJE.Default.addMonths(m,0,true)}if(H){if(k&&G!=12){v.addFooter(m.getFullYear()+" Totals:","&nbsp;",b.dollars((B+K),2),b.dollars(K,2),b.dollars(B,2),"&nbsp;")}v.addFooter("Totals:","&nbsp;",b.dollars(f,2),b.dollars(M,2),b.dollars(h,2),"&nbsp;")}this.AMORT_TERM=T;this.INTEREST_ONLY_TERM=s;this.INTEREST_PAID=M;this.TOTAL_OF_PAYMENTS=f;this.MONTHLY_PAYMENT=N;this.LOAN_AMOUNT=h;this.FINAL_PAYMENT_DATE_TERM=e;this.FINAL_PAYMENT_DATE=Q;this.FIRST_PAYMENT_DATE=w};KJE.Loan365360Calc.prototype.getPaymentNumber=function(b){var a=b;if(this.PAYMENT_FREQUENCY_ID!=KJE.Loan365360Calc.FREQ_MONTHLY){a=KJE.round(((b-1)/this.PAYMENT_MONTHS_PER_PERIOD)+1)}return a};KJE.Loan365360Calc.prototype.formatReport=function(b){var c=KJE;var a=KJE.iDecimal;var d=b;d=KJE.replace("LOAN_TYPE",KJE.Loan365360Calc.LOAN_TYPE_DESC[this.LOAN_TYPE],d);d=KJE.replace("RESULT_MESSAGE",this.sReturnMessage,d);d=KJE.replace("MONTHLY_PAYMENT",c.dollars(this.MONTHLY_PAYMENT,a),d);d=KJE.replace("INTEREST_RATE",c.percent(this.INTEREST_RATE/100,3),d);d=KJE.replace("LOAN_TERM",c.number(this.LOAN_TERM+this.INTEREST_ONLY_TERM),d);d=KJE.replace("AMORT_TERM",c.number(this.AMORT_TERM),d);d=KJE.replace("INTEREST_ONLY_TERM",c.number(this.INTEREST_ONLY_TERM),d);d=KJE.replace("INTEREST_TYPE_DESC",KJE.Loan365360Calc.INTEREST_TYPE_LIST[this.INTEREST_TYPE],d);d=KJE.replace("LOAN_AMOUNT",c.dollars(this.LOAN_AMOUNT,this.LOAN_AMOUNT_DECIMALS),d);d=KJE.replace("INTEREST_PAID",c.dollars(this.INTEREST_PAID,a),d);d=KJE.replace("TOTAL_OF_PAYMENTS",c.dollars(this.TOTAL_OF_PAYMENTS,a),d);d=KJE.replace("START_DATE",this.START_DATE==null?KJE.Default.MSG_NA:KJE.dateFormat(this.START_DATE),d);d=KJE.replace("FIRST_PAYMENT_DATE",this.FIRST_PAYMENT_DATE==null?KJE.Default.MSG_NA:KJE.dateFormat(this.FIRST_PAYMENT_DATE),d);d=KJE.replace("FINAL_PAYMENT_DATE_TERM",this.FINAL_PAYMENT_DATE_TERM==null?KJE.Default.MSG_NA:KJE.dateFormat(this.FINAL_PAYMENT_DATE_TERM),d);d=KJE.replace("FINAL_PAYMENT_DATE",this.FINAL_PAYMENT_DATE==null?KJE.Default.MSG_NA:KJE.dateFormat(this.FINAL_PAYMENT_DATE),d);d=KJE.replace("FREQUENCY_TYPE_LBL_PLURAL",KJE.Loan365360Calc.FREQUENCY_TYPES_LBL_PLURAL[this.PAYMENT_FREQUENCY_ID],d);d=KJE.replace("FREQUENCY_TYPE_LBL",KJE.Loan365360Calc.FREQUENCY_TYPES_LBL[this.PAYMENT_FREQUENCY_ID],d);d=KJE.replace("FREQUENCY_TYPE_CAP",KJE.Loan365360Calc.FREQUENCY_TYPES_CAP[this.PAYMENT_FREQUENCY_ID],d);d=KJE.replace("FREQUENCY_TYPE",KJE.Loan365360Calc.FREQUENCY_TYPES[this.PAYMENT_FREQUENCY_ID],d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.PMT=function(a,c,b){if(c<=0){return b}if(c<=1){return b*(1+a)}if(a==0){return b/c}return(b*a)/(1-Math.pow((1+a),(c*(-1))))};KJE.Loan365360Calc.LOAN_INSTALLMENT=0;KJE.Loan365360Calc.LOAN_BALLOON=1;KJE.Loan365360Calc.LOAN_INTEREST_ONLY=2;KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST=3;KJE.Loan365360Calc.LOAN_TYPE_ID=KJE.parameters.get("ARRAY_LOAN_TYPE_ID",[0,1,2,3]);KJE.Loan365360Calc.LOAN_TYPE_DESC=KJE.parameters.get("ARRAY_LOAN_TYPE_DESC",["Installment","Balloon","Interest Only","Principal + Interest"]);KJE.Loan365360Calc.INTEREST_360=0;KJE.Loan365360Calc.INTEREST_365=1;KJE.Loan365360Calc.INTEREST_ACTUAL=2;KJE.Loan365360Calc.INTEREST_TYPE_ID=KJE.parameters.get("ARRAY_INTEREST_TYPE_ID",[1,2]);KJE.Loan365360Calc.INTEREST_TYPE_LIST=KJE.parameters.get("ARRAY_INTEREST_TYPE_DESC",["365/360 U.S. Rule","365/365 U.S. Rule","365/Actual U.S. Rule"]);KJE.Loan365360Calc.INTEREST_TYPE_DESC=[KJE.Loan365360Calc.INTEREST_TYPE_LIST[KJE.Loan365360Calc.INTEREST_365],KJE.Loan365360Calc.INTEREST_TYPE_LIST[KJE.Loan365360Calc.INTEREST_ACTUAL]];KJE.Loan365360Calc.FREQ_MONTHLY=0;KJE.Loan365360Calc.FREQ_QUARTERLY=1;KJE.Loan365360Calc.FREQ_SEMIANNUAL=2;KJE.Loan365360Calc.FREQ_ANNUAL=3;KJE.Loan365360Calc.FREQUENCY_INDEXES=[KJE.Loan365360Calc.FREQ_MONTHLY,KJE.Loan365360Calc.FREQ_QUARTERLY,KJE.Loan365360Calc.FREQ_SEMIANNUAL,KJE.Loan365360Calc.FREQ_ANNUAL];KJE.Loan365360Calc.FREQUENCY_TYPES=KJE.parameters.get("ARRAY_365360_FREQUENCY_TYPES",["Monthly","Quarterly","Semi-annual","Annual"]);KJE.Loan365360Calc.FREQUENCY_TYPES_CAP=KJE.parameters.get("ARRAY_365360_FREQUENCY_TYPES_CAP",["Monthly payment","Quarterly payment","Semi-annual payment","Annual payments"]);KJE.Loan365360Calc.FREQUENCY_TYPES_LBL=KJE.parameters.get("ARRAY_365360_FREQUENCY_TYPES_LBL",["Monthly payments","Quarterly payments","Semi-annual payments","Annual payments"]);KJE.Loan365360Calc.FREQUENCY_TYPES_LBL_PLURAL=KJE.parameters.get("ARRAY_365360_FREQUENCY_TYPES_LBL_PLURAL",["Months","Quarters","Payments","Annual Payments"]);KJE.Loan365360Calc.FREQUENCY_ANNUAL_PERIODS=[12,4,2,1];KJE.Loan365360Calc.FREQUENCY_MONTHS_PER_PERIOD=[1,3,6,12];KJE.Loan365360Calc.getFrequencyDrop=function(b,a,c){return KJE.getDropBox(b,KJE.parameters.get(b,(!a?KJE.Loan365360Calc.FREQ_MONTHLY:a)),KJE.Loan365360Calc.FREQUENCY_INDEXES,KJE.Loan365360Calc.FREQUENCY_TYPES,c)};KJE.Default.MSG_NA=KJE.parameters.get("MSG_NA","N/A");KJE.Loan365360Calc.getPayment=function(z,j,d,c,h,m,v,F,q){var G=KJE.round;var H=KJE.Default.addMonths;var l=j;var k=KJE.Loan365360Calc.FREQUENCY_MONTHS_PER_PERIOD[F];var B=KJE.Loan365360Calc.FREQUENCY_ANNUAL_PERIODS[F];var w=new Object();var E=w.FINAL_PAYMENT_DATE=H(h,d-1,true);var A=w.PERIOD_RATE=l/B;w.FIRST_PAYMENT_DATE=H(h,-1,true);var y=w.DAILY_RATE_LEAP=KJE.Loan365360Calc.getDailyRate(j,v,new Date(2016,1,1));var D=w.DAILY_RATE=KJE.Loan365360Calc.getDailyRate(j,v,new Date(2015,1,1));w.FIRST_PAYMENT_DATE=H(h,-1,true);var I=w.PREPAID_INTEREST_DAYS=KJE.Default.getDays(c,w.FIRST_PAYMENT_DATE);var i=w.PREPAID_INTEREST=KJE.Loan365360Calc.getInterest(D,y,v,z,c,w.FIRST_PAYMENT_DATE);var e=(I>(k*30/2)?1:0);if(m==KJE.Loan365360Calc.LOAN_INTEREST_ONLY){w.MONTHLY_PAYMENT=G(30*D*z*k+(k==1?i:0),2)}else{if(m==KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST){w.MONTHLY_PAYMENT=G((z/q),2)}else{var s=Math.round(d);var u=Math.round(d/k);var r=Math.round(KJE.PMT(A,u+e,z+i)*1000);var b=r*0.5;for(var t=0;t<=19;t++){var a=Math.round(z*1000);var g=null;var f=H(c,0,true);var C=0;for(var x=1;x<=s;x++){g=H(h,x-1,true);C+=KJE.Loan365360Calc.getInterest(D,y,v,a,f,g);if((x-1)%k==0){a-=r-C;C=0}f=H(g,0,true)}r+=(a<0?(b*(-1)):b);b=b/2}w.MONTHLY_PAYMENT=G(r/1000,2)}}return w};KJE.Loan365360Calc.getInterest=function(c,h,k,i,j,f){if(k!=KJE.Loan365360Calc.INTEREST_ACTUAL){return KJE.round(c*KJE.Default.getDays(j,f)*i,2)}var g=0;if(j.getYear()!=f.getYear()){var b=KJE.Default.getDays(j,new Date(j.getFullYear(),j.getMonth(),31));var a=KJE.Default.getDays(j,f)-b;var e=c;var d=c;if(new Date(j.getYear(),1,29).getMonth()==1){e=h}if(new Date(f.getYear(),1,29).getMonth()==1){d=h}g=b*e*i+a*d*i}else{e=c;if(new Date(j.getYear(),1,29).getMonth()==1){e=h}g=e*KJE.Default.getDays(j,f)*i}return KJE.round(g,2)};KJE.Loan365360Calc.getDailyRate=function(c,a,b){var d=KJE.Loan365360Calc;if(a==d.INTEREST_365){return c/d.RATE_FACTOR_365}else{if(a==d.INTEREST_ACTUAL){if(new Date(b.getYear(),1,29).getMonth()==1){return c/d.RATE_FACTOR_366}else{return c/d.RATE_FACTOR_365}}else{return c/d.RATE_FACTOR_360}}};KJE.Loan365360Calc.RATE_FACTOR_365=365;KJE.Loan365360Calc.RATE_FACTOR_366=366;KJE.Loan365360Calc.RATE_FACTOR_360=360;KJE.Loan365360Calc.ONE_MONTH=1;KJE.Loan365360Calc.FIRST_DAY_NEXT_MONTH=0;KJE.CalcName="365/360 Loan Calculator";KJE.CalcType="Loan365360";KJE.CalculatorTitleTemplate="365/360 Loan Calculator";KJE.parseInputs=function(b){b=KJE.replace("**PAYMENT_FREQUENCY**",KJE.Loan365360Calc.getFrequencyDrop("PAYMENT_FREQUENCY",KJE.Loan365360Calc.FREQ_MONTHLY),b);var a=KJE.getDropBox("LOAN_TYPE",KJE.parameters.get("LOAN_TYPE",0),KJE.Loan365360Calc.LOAN_TYPE_ID,KJE.Loan365360Calc.LOAN_TYPE_DESC);b=KJE.replace("**LOAN_TYPE**",a,b);var a=KJE.getDropBox("INTEREST_TYPE",KJE.parameters.get("INTEREST_TYPE",0),KJE.Loan365360Calc.INTEREST_TYPE_ID,KJE.Loan365360Calc.INTEREST_TYPE_DESC);b=KJE.replace("**INTEREST_TYPE**",a,b);return b};KJE.initialize=function(){KJE.CalcControl=new KJE.Loan365360Calc();KJE.GuiControl=new KJE.Loan365360(KJE.CalcControl)};KJE.Loan365360=function(g){var f=KJE;var d=KJE.gLegend;var b=KJE.inputs.items;this.MSG_GRAPH_BY_PAYMENT=KJE.parameters.get("MSG_GRAPH_BY_PAYMENT","Balance after payment");this.MSG_PAYMENT_NUMBER=KJE.parameters.get("MSG_PAYMENT_NUMBER","Payment Number");this.MSG_PRINCIPAL=KJE.parameters.get("MSG_PRINCIPAL","Principal");this.MSG_INTEREST=KJE.parameters.get("MSG_INTEREST","Interest");KJE.Label("MONTHLY_PAYMENT","Monthly payment",null,null,"bold");KJE.PercentSlider("INTEREST_RATE","Interest rate",0,50,3);KJE.NumberSlider("LOAN_TERM","Loan term",0,360,0);KJE.NumberSlider("AMORT_TERM","Amortization term",0,360,0);KJE.NumberSlider("INTEREST_ONLY_TERM","Interest only term",0,360,0);KJE.DollarSlider("LOAN_AMOUNT","Amount of loan",0,10000000,2);KJE.Date("START_DATE","Financing start date");KJE.Date("FIRST_PAYMENT_DATE","First payment date");KJE.Label("FINAL_PAYMENT_DATE","Final payment date");KJE.Label("TOTAL_OF_PAYMENTS","Total payments",null,null,"bold");KJE.Label("INTEREST_PAID","Total interest paid",null,null,"bold");KJE.DropBox("PAYMENT_FREQUENCY","Payment frequency");KJE.DropBox("LOAN_TYPE","Loan type");KJE.DropBox("INTEREST_TYPE","Calculation method");var a=KJE.gNewGraph(KJE.gLINE,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE1","Balances for a KJE1 loan"));if(a){a._titleYAxis.setText(KJE.sCurrency);a._legend.setVisible(false);a._iArea=KJE.gGraphLine.AREA_FIRST_ONLY;a._titleXAxis.setText(g.MSG_PAYMENT_NUMBER)}var c=KJE.gNewGraph(KJE.gSTACKED,"GRAPH2",true,true,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE2","Total Principal and Interest by Payment"));if(c){c._titleYAxis.setText(KJE.sCurrency);c._titleXAxis.setText(g.MSG_PAYMENT_NUMBER)}var e=KJE.parameters.get("MSG_DROPPER_TITLE","Loan information:");KJE.addDropper(new KJE.Dropper("INPUTS",true,e,e),KJE.colorList[0])};KJE.Loan365360.prototype.setValues=function(b){var a=KJE.inputs.items;b.LOAN_TYPE=a.LOAN_TYPE.getValue();b.LOAN_AMOUNT=a.LOAN_AMOUNT.getValue();b.START_DATE=a.START_DATE.getValue();b.FIRST_PAYMENT_DATE=a.FIRST_PAYMENT_DATE.getValue();b.INTEREST_RATE=a.INTEREST_RATE.getValue();b.INTEREST_ONLY_TERM=0;b.AMORT_TERM=a.AMORT_TERM.getValue();b.INTEREST_ONLY_TERM=a.INTEREST_ONLY_TERM.getValue();b.LOAN_TERM=a.LOAN_TERM.getValue();b.PAYMENT_FREQUENCY_ID=a.PAYMENT_FREQUENCY.getValue();if(b.LOAN_TYPE==KJE.Loan365360Calc.LOAN_PRINCIPAL_PLUS_INTEREST){a.INTEREST_ONLY_TERM.enable()}else{a.INTEREST_ONLY_TERM.disable()}b.INTEREST_TYPE=a.INTEREST_TYPE.getValue()};KJE.Loan365360.prototype.refresh=function(f){var e=KJE;var d=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];var c=KJE.gGraphs[1];KJE.setTitleTemplate(e.dollars(f.MONTHLY_PAYMENT,2),e.number(f.LOAN_TERM),e.percent(f.INTEREST_RATE/100,3));if(a){a.removeAll();a.setGraphCategories(f.cats);a.setTitleTemplate(e.dollars(f.LOAN_AMOUNT));a.add(new KJE.gGraphDataSeries(f.DS_BALANCE,this.MSG_GRAPH_BY_PAYMENT,a.getColor(1)));a.paint()}if(c){c.removeAll();c.setGraphCategories(f.cats2);c.add(new KJE.gGraphDataSeries(f.DS_PRINCIPAL,this.MSG_PRINCIPAL,a.getColor(1)));c.add(new KJE.gGraphDataSeries(f.DS_INTEREST,this.MSG_INTEREST,a.getColor(2)));c.paint()}b.MONTHLY_PAYMENT.setText(e.dollars(f.MONTHLY_PAYMENT,2));b.TOTAL_OF_PAYMENTS.setText(e.dollars(f.TOTAL_OF_PAYMENTS,2));b.INTEREST_PAID.setText(e.dollars(f.INTEREST_PAID,2));b.FINAL_PAYMENT_DATE.setText(e.dateFormat(f.FINAL_PAYMENT_DATE_TERM));b.FIRST_PAYMENT_DATE.setText(e.dateFormat(f.FIRST_PAYMENT_DATE),true);b.AMORT_TERM.setValue(f.AMORT_TERM,true);b.LOAN_TERM.setValue(f.LOAN_TERM,true);b.INTEREST_ONLY_TERM.setValue(f.INTEREST_ONLY_TERM,true);KJE.setLabelText(b.MONTHLY_PAYMENT._label,KJE.Loan365360Calc.FREQUENCY_TYPES_CAP[f.PAYMENT_FREQUENCY_ID]+KJE.Colon)};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-LOAN_TYPE'>**LOAN_TYPE**</div> <div id=\"KJE-C-PAYMENT_FREQUENCY\">**PAYMENT_FREQUENCY**</div> <div id='KJE-C-LOAN_AMOUNT'><input id='KJE-LOAN_AMOUNT' /></div> <div id='KJE-C-INTEREST_RATE'><input id='KJE-INTEREST_RATE' /></div> <div id='KJE-C-START_DATE'><input id='KJE-START_DATE' /></div> <div id='KJE-C-LOAN_TERM'><input id='KJE-LOAN_TERM' /></div> <div id='KJE-C-AMORT_TERM'><input id='KJE-AMORT_TERM' /></div> <div id='KJE-C-INTEREST_ONLY_TERM'><input id='KJE-INTEREST_ONLY_TERM' /></div> <div id='KJE-C-FIRST_PAYMENT_DATE'><input id='KJE-FIRST_PAYMENT_DATE' /></div> <div id='KJE-C-FINAL_PAYMENT_DATE'><div id='KJE-FINAL_PAYMENT_DATE' ></div></div> <div id='KJE-C-MONTHLY_PAYMENT'><div id='KJE-MONTHLY_PAYMENT'></div></div> <div id='KJE-C-INTEREST_PAID'><div id='KJE-INTEREST_PAID'></div></div> <div id='KJE-C-TOTAL_OF_PAYMENTS'><div id='KJE-TOTAL_OF_PAYMENTS'></div></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-LOAN_TYPE' ><dt>Loan type</dt><dd>Choose installment loan a that is fully amortized over the term. This option will always have a term that is equal to the amortization term. Choose balloon to have a loan with a balloon payment where the term of the loan will be shorter than the amortization term. Choose interest only to make interest only payments. Choose Principal + Interest for a loan that has a fixed principal payment plus accrued interest.</dd></div> <div id='KJE-D-PAYMENT_FREQUENCY' ><dt>Payment frequency</dt><dd>Frequency of your payments. The default is monthly. Other options include quarterly, semi-annual and annual payments.</dd></div> <div id='KJE-D-LOAN_AMOUNT' ><dt>Amount of loan</dt><dd>Total amount of your loan.</dd></div> <div id='KJE-D-START_DATE' ><dt>Financing start date</dt><dd>This is the first day that interest will begin to be charged to your loan balance. This is also typically the same date that funds are distributed to the borrower.</dd></div> <div id='KJE-D-INTEREST_RATE' ><dt>Interest rate</dt><dd>Annual interest rate for this loan. Interest is calculated monthly at 1/365th of the annual rate times the number of days in the month on the current outstanding balance of your loan. If you have a loan with a payment frequency of quarterly, semi-annually or annually interest will accrue monthly increasing your principal balance until the next regular payment is received.</dd></div> <div id='KJE-D-LOAN_TERM' ><dt>Loan term</dt><dd>Number of payments for this loan.</dd></div> <div id='KJE-D-AMORT_TERM' ><dt>Amortization term</dt><dd>The number of payments over which your loan payment is calculated.</dd></div> <div id='KJE-D-INTEREST_ONLY_TERM' ><dt>Interest only term</dt><dd>The number of payments where the initial payments are interest only.</dd></div> <div id='KJE-D-FIRST_PAYMENT_DATE' ><dt>First payment date</dt><dd>This is the date of your first payment. The default first payment is the first of month after one full payment period has elapsed, but can be any date on or after the financing start date. The period of time before your first payment is not considered part of the loan term.</dd></div> <div id='KJE-D-FINAL_PAYMENT_DATE' ><dt>Final payment date</dt><dd>This is the date of final payment. </dd></div> <div id='KJE-D-MONTHLY_PAYMENT' ><dt>Payment</dt><dd>The payment for this loan each period.</dd></div> ";KJE.ReportText=' <center> <div class=\'KJEReportHeader KJEFontHeading\' style="line-height:25px; margin-bottom:-10px;padding-bottom:0px;">AMORTIZATION SCHEDULE</div> </center> <div class=KJEReportTableDiv> <table class=KJEReportTable summary="Loan Summary"> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder KJECell25" >Amount Financed</th><td class="KJECellStrong KJECellBorder KJECell25">Loan Date</td><td class="KJECellStrong KJECellBorder KJECell25">Maturity</td><td class="KJECellStrong KJECell25">Loan Term</td></tr> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder KJECell25" >LOAN_AMOUNT</th><td class="KJECellStrong KJECellBorder KJECell25">START_DATE</td><td class="KJECellStrong KJECellBorder KJECell25">FINAL_PAYMENT_DATE</td><td class="KJECellStrong KJECell25">LOAN_TERM FREQUENCY_TYPE_LBL_PLURAL</td></tr> <!-- <tr class=KJEOddRow><td class="KJECell KJECenter" colspan=4 ><div class="KJEFooter">References in the boxes above are for Lender\'s use only and do not limit the applicability of this document to any particular loan or item. Any item above containing "***" has been omitted due to the text length limitations.</div></td></tr>--> </table> <br> <table class=KJEReportTable summary="Loan Summary"> <tr class=KJEOddRow>  <td class="KJELabel KJECell25" >Disbursement date:</td>  <td class="KJECell KJECell25 KJELeftPad">START_DATE</td>  <td class="KJELabel KJECell25" >Repayment schedule:</td>  <td class="KJECell KJECell25 KJELeftPad">LOAN_TYPE<br>FREQUENCY_TYPE_LBL</td> </tr> <tr class=KJEOddRow>  <td class="KJECellStrong KJECell25">Interest rate:</td>  <td class="KJECell KJECell25 KJELeftPad">INTEREST_RATE</td>  <td class="KJECellStrong KJECell25">Calculation method:</td>  <td class="KJECell KJECell25 KJELeftPad">INTEREST_TYPE_DESC</td> </tr> </table> </div> **REPEATING GROUP** <div class=KJEInset><span class=KJEBold>NOTICE:</span> This is an estimated loan amortization schedule. Actual amounts may vary if payments are made on different dates or in different amounts.</div> ';